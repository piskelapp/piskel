<!doctype html5>
<html>
<head>
	<title>All piskels</title>
</head>
<body>
	<script type="text/javascript">
	(function () {
		var loadAllPiskelIds = function (frameId) {
			var xhr = new XMLHttpRequest();
			// TODO: Change frameId to framesheetId on the backend
			xhr.open('GET', 'http://2.piskel-app.appspot.com/all?l=' + frameId, true);
			xhr.responseType = 'text';

			xhr.onload = function(e) {
				var ul = document.createElement("UL");
				var innerHTML = "";
				eval("var responseObject = " + this.responseText);
				var keys = responseObject.keys;
				var baseUrl = window.location.origin + "/piskel/?frameId=";
				if (keys) {
					for (var i = 0 ; i < keys.length ; i++) {
						var key = keys[i];

						innerHTML += "<li><a target='_blank' href='"+baseUrl+key+"'>"+key+"</a></li>" 
					}
				}
				ul.innerHTML = innerHTML;
				document.body.appendChild(ul);
			};

			xhr.send();
	    };

	    loadAllPiskelIds();
	})();
	</script>
</body>
</html>